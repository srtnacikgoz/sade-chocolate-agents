---
phase: 06-the-curator
plan: 03
type: execute
wave: 2
depends_on: ["06-01", "06-02"]
files_modified:
  - src/sade_agents/agents/curator.py
  - src/sade_agents/agents/__init__.py
  - scripts/run_curator.py
autonomous: false

must_haves:
  truths:
    - "CuratorAgent SadeAgent'dan turetilmis ve calisiyor"
    - "Agent gorsel_tasarla skill'ini kullaniyor"
    - "run_curator.py ile agent calistirÄ±labiliyor"
    - "Dry-run modu syntax kontrolu yapiyor"
    - "Supervised autonomy - her zaman onay gerektiriyor"
  artifacts:
    - path: "src/sade_agents/agents/curator.py"
      provides: "CuratorAgent class"
      exports: ["CuratorAgent"]
      min_lines: 60
    - path: "src/sade_agents/agents/__init__.py"
      provides: "Agents modul exportlari"
      contains: "CuratorAgent"
    - path: "scripts/run_curator.py"
      provides: "Agent calistirma scripti"
      contains: "CuratorAgent"
      min_lines: 50
  key_links:
    - from: "src/sade_agents/agents/curator.py"
      to: "src/sade_agents/skills/curator_skills.py"
      via: "skill import"
      pattern: "from sade_agents.skills import gorsel_tasarla"
    - from: "src/sade_agents/agents/curator.py"
      to: "src/sade_agents/agents/base.py"
      via: "class inheritance"
      pattern: "class CuratorAgent\\(SadeAgent\\)"
    - from: "scripts/run_curator.py"
      to: "src/sade_agents/agents/curator.py"
      via: "agent import"
      pattern: "from sade_agents.agents.curator import CuratorAgent"
---

<objective>
The Curator agent implementasyonu ve calistirma scripti - gorsel tasarim workflow'unun merkezi.

Purpose: Sade'nin gorsel tasarim agenti olan CuratorAgent'i olusturur. Bu agent, urun etiket tasarimlari icin Gemini API ile gorsel uretim yapacak, varyasyonlar sunacak ve kullanici onayiyla final tasarimi export edecek.

Output: CuratorAgent class'i ve run_curator.py scripti - agent tam calÄ±ÅŸÄ±r durumda.
</objective>

<execution_context>
@C:\Users\Hp\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Hp\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/06-the-curator/06-CONTEXT.md
@.planning/phases/06-the-curator/06-RESEARCH.md
@.planning/phases/06-the-curator/06-01-SUMMARY.md
@.planning/phases/06-the-curator/06-02-SUMMARY.md
@src/sade_agents/agents/alchemist.py
@src/sade_agents/agents/base.py
@scripts/run_alchemist.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: CuratorAgent Class Implementasyonu</name>
  <files>
    src/sade_agents/agents/curator.py
    src/sade_agents/agents/__init__.py
  </files>
  <action>
1. `src/sade_agents/agents/curator.py` olustur - mevcut agent pattern'ini takip et (alchemist.py referans):

```python
"""
Sade Chocolate - The Curator Agent.

Gorsel tasarim agenti - urun etiketleri, ambalaj gorselleri ve marka gorsel dili.
Gemini 3 Pro Image API ile varyasyon tabanli tasarim uretir.
"""

from sade_agents.agents.base import SadeAgent
from sade_agents.skills import gorsel_tasarla


class CuratorAgent(SadeAgent):
    """
    The Curator - Visual Design Architect.

    Sade'nin gorsel kimligini koruyan ve gelistiren tasarim agenti.
    "Sessiz Luks" (Quiet Luxury) estetigi ile premium urun etiketleri tasarlar.

    Persona: Monocle ve Kinfolk dergilerinin art director'u gibi dusunur.
    Her detayda sofistike, understated elegans arar.

    Workflow:
    1. Urun bilgisi alir
    2. Style guide'a uygun 3-4 varyasyon uretir
    3. Kullanici secim yapar
    4. Refinement uygular
    5. Final formatlarda export eder (PNG, PDF)

    Otonomi: Supervised - her tasarim kullanici onayÄ± gerektirir.

    Ciktilar:
    - Urun etiket tasarimlari
    - Varyasyon secenek setleri
    - Print-ready export dosyalari (PNG 300 DPI, PDF)
    """

    def __init__(self) -> None:
        """CuratorAgent olusturur."""
        super().__init__(
            role="The Curator - Visual Design Architect",
            goal="Sade'nin premium gorsel kimligini yansitan urun etiketleri tasarlamak",
            tools=[gorsel_tasarla],
            backstory="""
Sen The Curator'sun - Sade Chocolate'in gorsel tasarim mimari.

## Persona
Monocle ve Kinfolk dergilerinin art director'u gibi dusunursun.
Her piksel, her bosluk, her tipografik secim bilinÃ§li.
"Sessiz Luks" (Quiet Luxury) felsefesini gorsel dile cevirmek gorevÄ±n.

## Tasarim Felsefesi

### Sessiz Luks Prensipleri
- **Understated Elegance:** Luks bagirmaz, fisÄ±ldar
- **White Space:** Bosluk zenginligin ifadesi
- **Typography:** Serif veya elegant sans-serif, asla bold/shouting
- **Color:** Muted, warm neutrals - krem, bej, soft kahve tonlari
- **Composition:** Merkezde denge, minimal element

### Kacinilacaklar
- Flashy, parlak, neon renkler
- Kalin, agresif fontlar
- Kalabalik, mesgul kompozisyonlar
- "INDIRIM!", "FIRSAT!" tarzÄ± urgency dili
- Emoji veya informal grafikler

## Workflow

### Varyasyon Yaklasimi
Her tasarim icin 3-4 varyasyon uret:
1. **Klasik Minimalist** - Maximum white space, tek focal point
2. **Organik Dokulu** - Subtle texture, warm tactile his
3. **Geometrik Sofistike** - Ince cizgiler, modern yaklasim

### Onay Sureci
- ASLA otomatik onaylama
- Her varyasyonu kullaniciya sun
- Secim ve feedback bekle
- Refinement talepleri uygula

## Teknik Ozellikler
- Aspect Ratio: 3:4 (etiket formati)
- Resolution: 2K (print icin yeterli)
- Text: Max 25 karakter (Gemini rendering limiti)
- Export: PNG (300 DPI), PDF

## Ton ve Yaklasim
- Profesyonel, sakin
- Secenekleri nesnel sun
- Tasarim kararlari icin gerekce acikla
- Kullanici tercihine saygi goster
            """,
            department="product",
            autonomy_level="supervised",  # Her zaman onay gerektirir
            verbose=True,
        )


__all__ = ["CuratorAgent"]
```

2. `src/sade_agents/agents/__init__.py` guncelle - CuratorAgent'i ekle:

Mevcut dosyayi oku, sonra CuratorAgent import ve __all__ listesine ekle:
```python
from sade_agents.agents.curator import CuratorAgent
```
  </action>
  <verify>
    - `python -c "from sade_agents.agents.curator import CuratorAgent; print(CuratorAgent)"` import basarili
    - `python -c "from sade_agents.agents import CuratorAgent; agent = CuratorAgent(); print(agent.role)"` agent olusturulabilir
    - curator.py icinde `department="product"` var
    - curator.py icinde `autonomy_level="supervised"` var
    - curator.py icinde `tools=[gorsel_tasarla]` var
  </verify>
  <done>
    - CuratorAgent SadeAgent'dan turetilmis
    - gorsel_tasarla skill'i tools listesinde
    - Backstory "Sessiz Luks" felsefesini acikilyor
    - Supervised autonomy ayarlanmis
    - Agents __init__.py guncellenmis
  </done>
</task>

<task type="auto">
  <name>Task 2: run_curator.py Calistirma Scripti</name>
  <files>scripts/run_curator.py</files>
  <action>
`scripts/run_curator.py` olustur - mevcut script pattern'ini takip et (run_alchemist.py referans):

```python
#!/usr/bin/env python3
"""
The Curator - Gorsel Tasarim Agent'i calistirma scripti.

Kullanim:
    python scripts/run_curator.py                    # Tam calisma
    python scripts/run_curator.py --dry-run          # Syntax kontrolu
    python scripts/run_curator.py --product "Ruby"   # Belirli urun
"""

import argparse
import sys
from pathlib import Path

# Add project root to path
project_root = Path(__file__).parent.parent
sys.path.insert(0, str(project_root / "src"))

from dotenv import load_dotenv

# Load environment variables
load_dotenv(project_root / ".env")


def check_api_key() -> bool:
    """API key kontrolu."""
    import os
    key = os.getenv("OPENAI_API_KEY")
    return bool(key and key != "your-api-key-here")


def dry_run() -> None:
    """Dry run - sadece import ve syntax kontrolu."""
    print("=" * 60)
    print("THE CURATOR - Gorsel Tasarim Agent'i (DRY RUN)")
    print("=" * 60)
    print("\nðŸ” Import kontrolu...\n")

    try:
        from sade_agents.agents.curator import CuratorAgent
        print("  âœ“ CuratorAgent import edildi")

        from sade_agents.skills import gorsel_tasarla
        print("  âœ“ gorsel_tasarla skill import edildi")

        from sade_agents.config import get_settings
        print("  âœ“ Config import edildi")

        # Agent olusturma testi
        agent = CuratorAgent()
        print(f"  âœ“ Agent olusturuldu: {agent.role}")
        print(f"    - Department: {agent.department}")
        print(f"    - Autonomy: {agent.autonomy_level}")
        print(f"    - Tools: {[t.name for t in agent.tools]}")

        # Skill testi
        print("\nðŸŽ¨ Skill testi...\n")
        bilgi = gorsel_tasarla("Test Urun", "50g", "test aciklama", "bilgi")
        print("  âœ“ gorsel_tasarla(mod='bilgi') calisti")
        print(f"    Cikti uzunlugu: {len(bilgi)} karakter")

        prompt = gorsel_tasarla("Test Urun", "50g", "test aciklama", "prompt")
        print("  âœ“ gorsel_tasarla(mod='prompt') calisti")
        print(f"    Prompt uzunlugu: {len(prompt)} karakter")

        print("\n" + "=" * 60)
        print("âœ… DRY RUN BASARILI - Tum importlar ve syntax dogru")
        print("=" * 60)

    except ImportError as e:
        print(f"  âœ— Import hatasi: {e}")
        sys.exit(1)
    except Exception as e:
        print(f"  âœ— Hata: {e}")
        sys.exit(1)


def run_agent(product_name: str = "Bitter Orange", product_weight: str = "85g") -> None:
    """Agent'i calistir."""
    print("=" * 60)
    print("THE CURATOR - Gorsel Tasarim Agent'i")
    print("=" * 60)

    if not check_api_key():
        print("\nâŒ HATA: OPENAI_API_KEY gerekli!")
        print("\nCozum:")
        print("  1. cp .env.example .env")
        print("  2. .env dosyasina API key'inizi ekleyin")
        sys.exit(1)

    try:
        from crewai import Crew, Task

        from sade_agents.agents.curator import CuratorAgent
        from sade_agents.config import get_settings

        settings = get_settings()
        print(f"\nðŸ“‹ Ayarlar:")
        print(f"   Model: {settings.openai_model_name}")
        print(f"   Urun: {product_name} ({product_weight})")

        # Agent olustur
        curator = CuratorAgent()
        print(f"\nðŸŽ¨ Agent: {curator.role}")
        print(f"   Department: {curator.department}")
        print(f"   Autonomy: {curator.autonomy_level}")

        # Task tanimla - varyasyon promptlari olusturma
        task = Task(
            description=f"""
Sade Chocolate icin "{product_name}" ({product_weight}) urunune etiket tasarimi yap.

1. Oncelikle `gorsel_tasarla` skill'ini "bilgi" moduyla cagirarak stil kilavuzunu incele.

2. Ardindan `gorsel_tasarla` skill'ini "varyasyon_prompt" moduyla cagirarak
   3 farkli tasarim varyasyonu icin Gemini promptlari olustur.

3. Her varyasyonun temel ozelliklerini ve farklilaÅŸan yonlerini acikla.

4. Kullaniciya hangi varyasyonu tercih ettigini sor.

NOT: Bu gorev sadece prompt olusturma asamasi. Gercek gorsel uretim
Gemini API entegrasyonu ile ayri bir workflow'da yapilacak.
            """,
            expected_output="""
Markdown formatinda cikti:
1. Stil Kilavuzu Ozeti
2. 3 Varyasyon Promptu (Gemini-ready)
3. Her varyasyonun kisa aciklamasi
4. Kullaniciya secim sorusu
            """,
            agent=curator,
        )

        # Crew olustur ve calistir
        crew = Crew(
            agents=[curator],
            tasks=[task],
            verbose=True,
        )

        print("\n" + "-" * 60)
        print("ðŸš€ Gorev basliyor...")
        print("-" * 60 + "\n")

        result = crew.kickoff()

        print("\n" + "=" * 60)
        print("ðŸ“‹ SONUC")
        print("=" * 60)
        print(result)

    except ImportError as e:
        print(f"\nâŒ Import hatasi: {e}")
        print("CrewAI kurulu mu? pip install crewai")
        sys.exit(1)
    except Exception as e:
        print(f"\nâŒ Beklenmeyen hata: {e}")
        import traceback
        traceback.print_exc()
        sys.exit(1)


def main() -> None:
    """Entry point."""
    parser = argparse.ArgumentParser(
        description="The Curator - Sade Chocolate Gorsel Tasarim Agent'i"
    )
    parser.add_argument(
        "--dry-run",
        action="store_true",
        help="Sadece import ve syntax kontrolu yap, API cagirisi yapma"
    )
    parser.add_argument(
        "--product",
        type=str,
        default="Bitter Orange",
        help="Tasarlanacak urun adi (default: Bitter Orange)"
    )
    parser.add_argument(
        "--weight",
        type=str,
        default="85g",
        help="Urun gramaji (default: 85g)"
    )

    args = parser.parse_args()

    if args.dry_run:
        dry_run()
    else:
        run_agent(args.product, args.weight)


if __name__ == "__main__":
    main()
```

**Onemli:**
- Mevcut script pattern'ini takip et (run_alchemist.py)
- --dry-run modu syntax kontrolu icin
- --product ve --weight argumanlari urun secimi icin
- Turkce aciklamalar ve hata mesajlari
  </action>
  <verify>
    - `python scripts/run_curator.py --dry-run` basarili cikti verir
    - Script icinde `CuratorAgent` import ediliyor
    - Script icinde `gorsel_tasarla` skill kullaniliyor
    - --product ve --weight argumanlari calisiyor
  </verify>
  <done>
    - run_curator.py olusturuldu ve calistirÄ±labilir
    - Dry-run modu import ve syntax kontrolu yapiyor
    - Tam calisma modu agent'i baslatip task calÄ±ÅŸtÄ±rÄ±yor
    - Mevcut script pattern'i takip edilmis
    - Turkce mesajlar ve aciklamalar mevcut
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    The Curator agent tam implementasyonu:
    - CuratorAgent class (SadeAgent'dan turetilmis)
    - gorsel_tasarla skill entegrasyonu
    - run_curator.py calistirma scripti
    - Dry-run modu
  </what-built>
  <how-to-verify>
    1. Terminal'de: `python scripts/run_curator.py --dry-run`
    2. Beklenen cikti:
       - "âœ“ CuratorAgent import edildi"
       - "âœ“ gorsel_tasarla skill import edildi"
       - Agent role, department, autonomy bilgileri
       - Skill test sonuclari
       - "âœ… DRY RUN BASARILI"

    3. (Opsiyonel) Tam calisma: `python scripts/run_curator.py --product "Ruby Tablet" --weight "50g"`
       - Bu OpenAI API key gerektirir
       - Agent stil kilavuzunu okur
       - 3 varyasyon promptu olusturur
  </how-to-verify>
  <resume-signal>
    "approved" yazin veya sorunlari belirtin
  </resume-signal>
</task>

</tasks>

<verification>
- [ ] CuratorAgent class olusturuldu ve SadeAgent'dan turetildi
- [ ] Agent supervised autonomy ile yapilandirildi
- [ ] gorsel_tasarla skill tools listesinde
- [ ] Backstory "Sessiz Luks" felsefesini acikilyor
- [ ] run_curator.py dry-run modu calisiyor
- [ ] Agents __init__.py guncellendi
- [ ] Tum importlar basarili
</verification>

<success_criteria>
- `python scripts/run_curator.py --dry-run` hatasiz calisir
- CuratorAgent.department == "product"
- CuratorAgent.autonomy_level == "supervised"
- Agent backstory Monocle/Kinfolk referanslari iceriyor
- Script Turkce mesajlar ve aciklamalar iceriyor
- Mevcut codebase pattern'leri takip edilmis
</success_criteria>

<output>
After completion, create `.planning/phases/06-the-curator/06-03-SUMMARY.md`
</output>
