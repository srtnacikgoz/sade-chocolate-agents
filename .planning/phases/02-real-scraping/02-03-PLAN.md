---
phase: 02-real-scraping
plan: 03
type: execute
wave: 2
depends_on:
  - 02-01
  - 02-02
files_modified:
  - src/sade_agents/web/app.py
  - src/sade_agents/web/sidebar.py
autonomous: false

must_haves:
  truths:
    - "Rakip Yonetimi sayfasi sidebar'dan erisilebilir"
    - "Kullanici UI'dan rakip ekleyip silebilir"
    - "Scraper kodlari commit edilmis"
  artifacts:
    - path: "src/sade_agents/web/app.py"
      provides: "Ana uygulama (competitors sayfasi dahil)"
    - path: "src/sade_agents/web/sidebar.py"
      provides: "Sidebar navigasyonu"
  key_links:
    - from: "src/sade_agents/web/sidebar.py"
      to: "src/sade_agents/web/pages/competitors.py"
      via: "sayfa navigasyonu"
      pattern: "competitors"
---

<objective>
Rakip Yonetimi UI'sini sidebar'a entegre et ve tum degisiklikleri commit et.

Purpose: Kullanicilarin scraping hedeflerini UI uzerinden yonetebilmesini saglamak ve Phase 2 kodlarini git'e kaydetmek.

Output: Sidebar'da "Rakip Yonetimi" sayfasi, tum Phase 2 kodlari commit edilmis.
</objective>

<execution_context>
@C:\Users\Hp\.claude/agents/gsd-planner.md
@C:\Users\Hp\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Entegre edilecek kodlar
@src/sade_agents/web/pages/competitors.py
@src/sade_agents/web/app.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Sidebar'a Rakip Yonetimi Ekle</name>
  <files>src/sade_agents/web/sidebar.py</files>
  <action>
Sidebar navigasyonuna "Rakip Yonetimi" sayfasini ekle:

1. Sidebar dosyasini oku ve mevcut yapiya uy
2. "Rakip Yonetimi" secenek ekle (ikon: `target` veya `crosshairs` veya uygun baska)
3. Secildiginde `competitors` key'i don
4. Dogru siraya yerlestir (Analiz araclari grubunda)

**Ornek ekleme:**
```python
# Analiz araclari grubunda
if st.sidebar.button("Rakip Yonetimi", key="competitors"):
    return "competitors"
```

Not: Sidebar yapisi farkli olabilir, mevcut pattern'e uy.
  </action>
  <verify>`streamlit run src/sade_agents/web/app.py` calistir, sidebar'da "Rakip Yonetimi" gorulur</verify>
  <done>Rakip Yonetimi sidebar'da gorunuyor</done>
</task>

<task type="auto">
  <name>Task 2: App.py'da Sayfa Routing Ekle</name>
  <files>src/sade_agents/web/app.py</files>
  <action>
Ana uygulama dosyasinda competitors sayfasi routing'ini ekle:

1. app.py dosyasini oku
2. Mevcut sayfa routing yapisina uy
3. `competitors` key'i icin `competitors.render()` cagir

**Gerekli import:**
```python
from sade_agents.web.pages import competitors
```

**Routing ekleme (mevcut yapiya gore):**
```python
if page == "competitors":
    competitors.render()
```
  </action>
  <verify>Uygulama calisir, Rakip Yonetimi sayfasina gecis yapilabilir</verify>
  <done>Competitors sayfasi routing calisiyor</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Rakip Yonetimi UI entegrasyonu</what-built>
  <how-to-verify>
1. Terminalde: `streamlit run src/sade_agents/web/app.py`
2. Tarayicida uygulama acilir (http://localhost:8501)
3. Sidebar'da "Rakip Yonetimi" secenegini gor
4. Tikla, sayfa acilmali:
   - "Yeni Rakip Ekle" formu gorunur
   - Ad, URL, Aciklama alanlari var
   - "Ekle" butonu calisiyor
5. Test: Bir hedef ekle (orn: "test", "https://example.com")
6. Eklenen hedef "Mevcut Rakipler" altinda gorunur
7. Sil butonuyla silinebilir
  </how-to-verify>
  <resume-signal>"approved" yaz veya sorunlari bildir</resume-signal>
</task>

<task type="auto">
  <name>Task 4: Tum Degisiklikleri Commit Et</name>
  <files>-</files>
  <action>
Phase 2 kodlarini commit et:

**Commit edilecek dosyalar:**
- src/sade_agents/scrapers/smart_scraper.py
- src/sade_agents/scrapers/ai_scraper.py
- src/sade_agents/scrapers/__init__.py
- src/sade_agents/web/pages/competitors.py
- src/sade_agents/web/app.py (degisiklik varsa)
- src/sade_agents/web/sidebar.py (degisiklik varsa)
- src/sade_agents/crews/market_analysis_crew.py
- src/sade_agents/config/settings.py
- src/sade_agents/models/workflow_models.py (degisiklik varsa)
- tests/scrapers/*.py

**Commit mesaji:**
```
feat(02): add AI-powered smart scraping system

Phase 2: Real Scraping
- SmartScraper: Site discovery (sitemap, menu, AI)
- AIScraper: Single-page AI extraction
- Competitors UI: Target management page
- Unit tests for scrapers
- MarketAnalysisCrew integration

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
```

**Onemli:** `scraping_targets.json` ve `firebase-service-account.json` commit ETME (gizli bilgi iceriyor olabilir).
  </action>
  <verify>
`git log -1 --oneline` son commit'i gosterir.
`git status` temiz (sadece untracked config dosyalari kalir).
  </verify>
  <done>Phase 2 kodlari commit edildi</done>
</task>

</tasks>

<verification>
- [ ] Sidebar'da "Rakip Yonetimi" sekmesi var
- [ ] Tiklandiginda competitors sayfasi aciliyor
- [ ] Hedef ekleme formu calisiyor
- [ ] Hedef silme calisiyor
- [ ] Tum scraper kodlari commit edildi
- [ ] Test dosyalari commit edildi
- [ ] Gizli dosyalar (.json credentials) commit edilmedi
</verification>

<success_criteria>
Rakip Yonetimi UI'si sidebar'dan erisilebilir durumda, kullanici hedef ekleyip silebiliyor. Tum Phase 2 kodlari git'e commit edilmis.
</success_criteria>

<output>
Tamamlandiginda `.planning/phases/02-real-scraping/02-03-SUMMARY.md` olustur.
</output>
